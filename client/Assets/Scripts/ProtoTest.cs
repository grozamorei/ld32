//
// ATTENTION: This file is automatically generated. do not try to edit it.
//

using System;
using System.IO;

namespace proto
{

    public enum EnterWorldStatus
    {
        NONE,
        ENTER_SUCCESS,
    }

    public abstract class BaseMessage
    {
        public abstract byte getID();

        protected MemoryStream stream;
        protected BinaryWriter writer;
        protected BinaryReader reader;

        protected int length = -1;
        protected byte realID = 255;

        protected void initSendStream()
        {
            stream = new MemoryStream();
            writer = new BinaryWriter(stream, System.Text.Encoding.UTF8);
            for (int i = 0; i < 5; i++) writer.Write((byte) 0); // reserved for length and type;
        }

        protected void initReceiveStream(byte[] source)
        {
            stream = new MemoryStream(source);
            reader = new BinaryReader(stream, System.Text.Encoding.UTF8);
            length = reader.ReadInt32();
            realID = reader.ReadByte();
        }

        protected string wrapString(string value, int wrapAround)
        {
            byte[] byteValue = System.Text.Encoding.UTF8.GetBytes(value);
            int emptyLength = wrapAround - byteValue.Length;
            string filler = "";
            for (int i = 0; i < emptyLength; i++) filler += " ";
            return value + filler;
        }

        protected byte[] wrapCommand()
        {
            int commandLen = (int)stream.Length - 5;
            writer.Seek(0, SeekOrigin.Begin);
            writer.Write(commandLen);
            writer.Write(getID());
            return stream.ToArray();
        }
    }

    public class DebugPackage : BaseMessage
    {
        public static byte ID { get { return 0; } }
        public override byte getID() { return 0; }
        public readonly string sender;
        public readonly string message;
    
        public DebugPackage( string sender, string message )
        {
            initSendStream();
            this.sender = sender;
            this.message = message;
        }
        public DebugPackage(byte[] source)
        {
            initReceiveStream(source);
            sender = reader.ReadString();
            message = reader.ReadString();
        }
        public byte[] encode()
        {
            writer.Write(wrapString(sender, 50));
            writer.Write(wrapString(message, 120));
            return wrapCommand();
        }
    }

    public class DeployBomb : BaseMessage
    {
        public static byte ID { get { return 1; } }
        public override byte getID() { return 1; }
        public readonly int target;
    
        public DeployBomb( int target )
        {
            initSendStream();
            this.target = target;
        }
        public DeployBomb(byte[] source)
        {
            initReceiveStream(source);
            target = reader.ReadInt32();
        }
        public byte[] encode()
        {
            writer.Write(target);
            return wrapCommand();
        }
    }

    public class RequestEnterWorld : BaseMessage
    {
        public static byte ID { get { return 2; } }
        public override byte getID() { return 2; }
        public readonly string userName;
        public readonly string worldName;
    
        public RequestEnterWorld( string userName, string worldName )
        {
            initSendStream();
            this.userName = userName;
            this.worldName = worldName;
        }
        public byte[] encode()
        {
            writer.Write(wrapString(userName, 50));
            writer.Write(wrapString(worldName, 50));
            return wrapCommand();
        }
    }

    public class DebugDeployConfiguration : BaseMessage
    {
        public static byte ID { get { return 3; } }
        public override byte getID() { return 3; }
        public readonly int[] configuration;
    
        public DebugDeployConfiguration( int[] configuration )
        {
            initSendStream();
            this.configuration = configuration;
        }
        public byte[] encode()
        {
            writer.Write((int)configuration.Length);
            for (int i = 0; i < configuration.Length; i++)
                writer.Write(configuration[i]);

            return wrapCommand();
        }
    }

    public class DeploySeed : BaseMessage
    {
        public static byte ID { get { return 4; } }
        public override byte getID() { return 4; }
        public readonly int target;
    
        public DeploySeed( int target )
        {
            initSendStream();
            this.target = target;
        }
        public byte[] encode()
        {
            writer.Write(target);
            return wrapCommand();
        }
    }

    public class SeedPreset : BaseMessage
    {
        public static byte ID { get { return 5; } }
        public override byte getID() { return 5; }
        public readonly int seedLocation;
        public readonly byte seedPreset;
    
        public SeedPreset( int seedLocation, byte seedPreset )
        {
            initSendStream();
            this.seedLocation = seedLocation;
            this.seedPreset = seedPreset;
        }
        public byte[] encode()
        {
            writer.Write(seedLocation);
            writer.Write(seedPreset);
            return wrapCommand();
        }
    }

    public class Welcome : BaseMessage
    {
        public static byte ID { get { return 6; } }
        public override byte getID() { return 6; }
        public readonly string availableName;
        public readonly string randomWorld;
    
        public Welcome(byte[] source)
        {
            initReceiveStream(source);
            availableName = reader.ReadString();
            randomWorld = reader.ReadString();
        }
    }

    public class ResponseEnterWorld : BaseMessage
    {
        public static byte ID { get { return 7; } }
        public override byte getID() { return 7; }
        public readonly EnterWorldStatus status;
        public readonly byte myId;
    
        public ResponseEnterWorld(byte[] source)
        {
            initReceiveStream(source);
            status = (EnterWorldStatus)reader.ReadByte();
            myId = reader.ReadByte();
        }
    }

    public class WorldData : BaseMessage
    {
        public static byte ID { get { return 8; } }
        public override byte getID() { return 8; }
        public readonly string name;
        public readonly short worldStep;
        public readonly short sizeX;
        public readonly short sizeY;
        public readonly short maxPopulation;
    
        public WorldData(byte[] source)
        {
            initReceiveStream(source);
            name = reader.ReadString();
            worldStep = reader.ReadInt16();
            sizeX = reader.ReadInt16();
            sizeY = reader.ReadInt16();
            maxPopulation = reader.ReadInt16();
        }
    }

    public class WorldSnapshot : BaseMessage
    {
        public static byte ID { get { return 9; } }
        public override byte getID() { return 9; }
        public readonly string snapshot;
    
        public WorldSnapshot(byte[] source)
        {
            initReceiveStream(source);
            var len = reader.ReadInt16();
            char[] strRaw = reader.ReadChars(len);
            snapshot = new string(strRaw);
        }
    }

    public class NewSeed : BaseMessage
    {
        public static byte ID { get { return 10; } }
        public override byte getID() { return 10; }
        public readonly int location;
        public readonly byte owner;
    
        public NewSeed(byte[] source)
        {
            initReceiveStream(source);
            location = reader.ReadInt32();
            owner = reader.ReadByte();
        }
    }

    public class SeedDestroyed : BaseMessage
    {
        public static byte ID { get { return 11; } }
        public override byte getID() { return 11; }
        public readonly int location;
    
        public SeedDestroyed(byte[] source)
        {
            initReceiveStream(source);
            location = reader.ReadInt32();
        }
    }

}